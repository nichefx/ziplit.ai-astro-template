# Astro Template with Supabase Integration

This is a simple Astro template that includes a working Supabase integration for building websites with authentication and database functionality.

## Features

- **Astro** with React integration
- **TypeScript** support
- **TailwindCSS v4** for styling
- **Supabase** integration with:
  - Client-side authentication
  - Database operations (CRUD)
  - Real-time subscriptions
- **Responsive design** with modern UI components

## Getting Started

### 1. Clone and Install

```bash
npm install
```

### 2. Set up Supabase

1. Create a new Supabase project at [supabase.com](https://supabase.com)
2. Copy your project URL and anon key from the project settings
3. Update the `.env` file with your Supabase credentials:

```env
PUBLIC_SUPABASE_URL=your_supabase_project_url
PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
```

### 3. Database Setup

EXAMPLE: Create a `leads` table in your Supabase database for the newsletter signup:

```sql
-- Create the leads table
create table leads (
  id bigint generated by default as identity primary key,
  name text not null,
  email text not null,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- Enable Row Level Security (optional but recommended)
alter table leads enable row level security;

-- Create a policy that allows all operations for now (customize as needed)
create policy "Allow all operations for leads" on leads for all using (true);
```

### 4. Run the Development Server

```bash
npm run dev
```

Open [http://localhost:4321](http://localhost:4321) to see your site.

## Supabase Integration

This template includes a simple newsletter signup form that demonstrates Supabase functionality:

### Example Newsletter Signup (`NewsletterSignup.tsx`)
- Simple name and email collection form
- Saves subscriber data to Supabase `leads` table (example)
- Client-side form handling with validation
- Error handling and success feedback

## Key Files

- `src/lib/supabase.ts` - Supabase client configuration
- `src/components/NewsletterSignup.tsx` - Newsletter signup component
- `src/components/Welcome.astro` - Main welcome page with newsletter form
- `.env` - Environment variables for Supabase

## Important Notes

- All Supabase operations run **client-side** to avoid SSR issues with Astro's static generation
- Environment variables are prefixed with `PUBLIC_` to be accessible in the browser
- Components use `client:load` directive to ensure they hydrate on the client
- The integration is designed to work with Astro's static site generation

## Deployment

When deploying, make sure to set your environment variables in your hosting platform:

- `PUBLIC_SUPABASE_URL`
- `PUBLIC_SUPABASE_ANON_KEY`

## Build for Production

```bash
npm run build
```

The built site will be in the `dist/` directory.
